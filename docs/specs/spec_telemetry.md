# Telemetry Export Format – Specification

## Purpose

Describe the format and semantics of the telemetry reports generated by the bootloader each generation. These files are used for debugging, research, and automated analysis by the `telemetry-review` skill.

## Inputs

- `App::exportHistory()` is called at the end of each evolution cycle (successful quine), writing a text file `gen_<n>.txt` under `build/<target>/bin/seq/<runid>/`.

## Behaviour

Each export file contains:

1. Header lines identifying the tool and timestamp.
2. `Final Generation: <n>` line.
3. `Kernel Size: <bytes>` line.
4. `CURRENT KERNEL (BASE64):` section with the base64-encoded WASM binary.
5. `HEX DUMP:` section with a formatted hex/ASCII view of the kernel.

Additional sections may be added in the future (disassembly, mutation logs). The parser used by automated tools should be resilient to extra lines and only rely upon the header keywords.

### Planned Extensions

The following fields are expected to be added to each export in future
revisions:

- `Mutations Attempted: <count>` – total number of mutation trials before
  a successful quine run.
- `Mutations Applied: <count>` – number of mutations actually incorporated
  into the kernel.
- `Mutation Breakdown: insert=<n>, delete=<n>, modify=<n>, append=<n>` –
  tally by type.
- `Traps: <code>` – if the previous generation trapped, record the trap
  reason (`unreachable`, `div_by_zero`, etc.).
- `Gen Duration: <ms>` – time taken from start to verification success.
- `Kernel Size Min/Max: <min>/<max>` – historical min/max size seen so far
  within the run.
- `Heuristic Blacklist: <entries>` – optional summary of patterns
  blacklisted by the mutation heuristic.

Telemetry consumers should ignore unknown labels and continue parsing
remaining fields.

## Constraints

- The Base64 payload must match the kernel byte size reported earlier in the file.
- Files should not exceed 64 KB to avoid tooling issues; if necessary compress automatically.

## Open Questions

- Should we export a JSON version for easier machine parsing?
- Is there value in including a snapshot of the App state (retry counts, uptime) directly in the report?

